<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista de Productos</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
</head>
<body onload="cargarLista()">
    <header>
        <h1 class="display-1">Tabla de Productos</h1>
    </header>
    <main>
        <section>
            <div id="tablaProductos"></div>
        </section>
    </main>
</body>
<script src="js/Producto.js"></script>
<script>
    var stockGuardado = JSON.parse(localStorage.getItem("stockProducto"))
    

    function cargarLista() {
        var tabla = "<table class=table table-dark>"
        tabla += "<thead>"
        tabla += "<t>"
        tabla += "<th scope=col>Id</th> <th scope=col>Nombre</th> <th scope=col>Descripcion</th> <th scope=col>Precio</th> <th scope=col>Cantidad</th> <th scope=col>Imagen</th>"
        tabla +="</tr>"
        tabla += "</thead>"
        tabla += "<tbody>"
        stockGuardado.forEach(item => {
            tabla += "<tr>"
            tabla += "<th scope=row>" + item.id + "</th>"
            tabla += "<td>" + item.nombre + "</td>"
            tabla += "<td>" + item.descripcion + "</td>"
            tabla += "<td>" + item.precio + "</td>"
            tabla += "<td>" + item.cantidad + "</td>"
            tabla += "<td> <img src='" + item.imagen + "' width=150px height=100px></td>"
            tabla += "<td> <input type='button' value='Descripcion Producto' onclick='editProdu(" + item.id + ", " + 1 + ")'> </td>"
            tabla += "<td> <input type='button' value='Editar Producto' onclick='editProdu(" + item.id + ", " + 2 + ")'> </td>"
            tabla += "</tr>"
        })
        tabla += "</tbody>"
        tabla += "</table>"
        tabla += "<input type='button' value='Nuevo Producto' onclick='nuevoProdu( " + 0 + ")'>"
        document.getElementById("tablaProductos").innerHTML = tabla
    }

    function nuevoProdu(val){
        if(val === 0){
            location.href='nuevoProducto.html'
        }
    }

    function editProdu(posiProducto, val){

        stockGuardado.forEach(item => {
            if(item.id === posiProducto){
                let listProduEdit = [
                new Producto(item.id, item.nombre, item.descripcion, item.precio, item.imagen, item.cantidad)
                ]
                localStorage.setItem("productoEdit", JSON.stringify(listProduEdit));
            }
            if(val === 1){
                // location.href='editarProducto.html'
            }else if(val === 2){
                location.href='editarProducto.html'
            }
        })
        }
</script>
</html>